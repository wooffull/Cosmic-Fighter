!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.cf=t()}}(function(){return function t(e,i,a){function o(n,r){if(!i[n]){if(!e[n]){var l="function"==typeof require&&require;if(!r&&l)return l(n,!0);if(s)return s(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[n]={exports:{}};e[n][0].call(c.exports,function(t){var i=e[n][1][t];return o(i?i:t)},c,c.exports,t,e,i,a)}return i[n].exports}for(var s="function"==typeof require&&require,n=0;n<a.length;n++)o(a[n]);return o}({1:[function(t,e,i){"use strict";var a=t("../util"),o=a.Assets,s=wfl.core.entities.GameObject,n=wfl.core.entities.PhysicsObject,r=(wfl.geom,function(t,e){(isNaN(t)||0>=t)&&(t=1),n.call(this),this.creator=e,this.customData.team=e.customData.team,this.customData.ignoreFriction=!0,this.graphic1=o.get(o.WEAK_BULLET_1),this.graphic2=o.get(o.WEAK_BULLET_2),this.graphic3=o.get(o.WEAK_BULLET_3),this.graphic4=o.get(o.WEAK_BULLET_4),this.defaultState=this.createState(),this.defaultState.addFrame(this.createFrame(this.graphic1,2)),this.defaultState.addFrame(this.createFrame(this.graphic2,2)),this.defaultState.addFrame(this.createFrame(this.graphic3,2)),this.defaultState.addFrame(this.createFrame(this.graphic4,2)),this.addState(s.STATE.DEFAULT,this.defaultState),this.damage=t,this.age=0,this.lifeTime=r.DEFAULT_MAX_LIFE_TIME,this.maxSpeed=r.DEFAULT_MAX_SPEED,this.solid=!0});Object.defineProperties(r,{DEFAULT_MAX_LIFE_TIME:{value:40},DEFAULT_SPEED:{value:.65},DEFAULT_MAX_SPEED:{value:.8}}),r.prototype=Object.freeze(Object.create(n.prototype,{update:{value:function(t){n.prototype.update.call(this,t),this.age++,this.age>=this.lifeTime&&(this.customData.removed=!0)}},resolveCollision:{value:function(t,e){var i=this.customData.team,a=t.customData.team;t!==this.creator&&t.solid&&(this.customData.removed=!0,void 0!==a&&a!==i&&t.takeDamage&&(t.takeDamage(this.damage),t.health<=0&&(t.customData.killer=this.creator)))}}})),Object.freeze(r),e.exports=r},{"../util":30}],2:[function(t,e,i){"use strict";var a=t("../util"),o=(a.Assets,t("./Player.js")),s=(wfl.core.entities.LivingObject,wfl.geom,function(t){o.call(this,t)});Object.defineProperties(s,{MINIMAP_FILL_STYLE:{value:"#06c833"}}),s.prototype=Object.freeze(Object.create(o.prototype,{sendUpdateToServer:{value:function(){}},drawOnMinimap:{value:function(t){var e=this.getWidth(),i=this.getHeight(),a=Math.round(.5*-e),o=Math.round(.5*-i),n=Math.round(e),r=Math.round(i);t.save(),t.fillStyle=s.MINIMAP_FILL_STYLE,t.fillRect(a,o,n,r),t.restore()}},shoot:{value:function(){}},justShot:{value:function(){}}})),Object.freeze(s),e.exports=s},{"../util":30,"./Player.js":5}],3:[function(t,e,i){"use strict";var a=t("../util"),o=a.Assets,s=wfl.core.entities.GameObject,n=wfl.core.entities.PhysicsObject,r=function(){n.call(this),this.id=r.id,this.defaultGraphic=o.get(o.BLOCK_FULL),this.defaultState=this.createState(),this.defaultState.addFrame(this.createFrame(this.defaultGraphic)),this.addState(s.STATE.DEFAULT,this.defaultState),this.solid=!0,this.fixed=!0,this.rotate(.5*-Math.PI)};Object.defineProperties(r,{name:{value:"FullBlock"},id:{value:0}}),r.prototype=Object.freeze(Object.create(n.prototype,{drawOnMinimap:{value:function(t){var e=this.getWidth(),i=this.getHeight(),a=Math.round(.5*-e),o=Math.round(.5*-i),s=Math.round(e),n=Math.round(i);t.save(),t.rotate(this.getRotation()),t.beginPath(),t.rect(a,o,s,n),t.fill(),t.stroke(),t.restore()}}})),Object.freeze(r),e.exports=r},{"../util":30}],4:[function(t,e,i){"use strict";var a=t("../util"),o=a.Assets,s=wfl.core.entities.GameObject,n=wfl.core.entities.PhysicsObject,r=wfl.geom,l=function(){n.call(this),this.id=l.id,this.defaultGraphic=o.get(o.BLOCK_HALF);var t=this.defaultGraphic.width,e=this.defaultGraphic.height,i=[new r.Vec2(.5*-t,.5*-e),new r.Vec2(.5*t,.5*-e),new r.Vec2(.5*-t,.5*e)],a=this.createFrame(this.defaultGraphic,1,!1);a.vertices=i,this.defaultState=this.createState(),this.defaultState.addFrame(a),this.addState(s.STATE.DEFAULT,this.defaultState),this.solid=!0,this.fixed=!0,this.rotate(.5*-Math.PI)};Object.defineProperties(l,{name:{value:"HalfBlock"},id:{value:0}}),l.prototype=Object.freeze(Object.create(n.prototype,{drawOnMinimap:{value:function(t){var e=this.getWidth(),i=this.getHeight(),a=Math.round(.5*-e),o=Math.round(.5*-i);t.save(),t.rotate(this.getRotation()),t.fillStyle=app.PhysicsObject.MINIMAP_FILL_STYLE,t.strokeStyle=app.PhysicsObject.MINIMAP_STROKE_STYLE,t.beginPath(),t.moveTo(a,o),t.lineTo(-a,o),t.lineTo(a,-o),t.closePath(),t.fill(),t.stroke(),t.restore()}}})),Object.freeze(l),e.exports=l},{"../util":30}],5:[function(t,e,i){"use strict";var a=t("../util"),o=a.Assets,s=t("../network"),n=wfl.core.entities.GameObject,r=wfl.core.entities.LivingObject,l=t("../particles"),h=l.Emitter,c=wfl.geom,d=function(t){r.call(this),this.customData.team=t;var e;e=0===t?o.SHIP_1:o.SHIP_2,this.defaultGraphic=o.get(e);var i=this.defaultGraphic.width,a=this.defaultGraphic.height,l=[new c.Vec2(.5*-i,.5*-a),new c.Vec2(.5*i,0),new c.Vec2(.5*-i,.5*a)],m=this.createFrame(this.defaultGraphic,1,!1);m.vertices=l,this.defaultState=this.createState(),this.defaultState.addFrame(m),this.addState(n.STATE.DEFAULT,this.defaultState),0===t?(this.explosionGraphic1=o.get(o.EXPLOSION_A_1),this.explosionGraphic2=o.get(o.EXPLOSION_A_2),this.explosionGraphic3=o.get(o.EXPLOSION_A_3),this.explosionGraphic4=o.get(o.EXPLOSION_END)):(this.explosionGraphic1=o.get(o.EXPLOSION_B_1),this.explosionGraphic2=o.get(o.EXPLOSION_B_2),this.explosionGraphic3=o.get(o.EXPLOSION_B_3),this.explosionGraphic4=o.get(o.EXPLOSION_END)),this.explosionState=this.createState(),this.explosionState.addFrame(this.createFrame(this.explosionGraphic1,2)),this.explosionState.addFrame(this.createFrame(this.explosionGraphic2,2)),this.explosionState.addFrame(this.createFrame(this.explosionGraphic3,2)),this.explosionState.addFrame(this.createFrame(this.explosionGraphic4,1/0)),this.addState(d.STATE.EXPLOSION,this.explosionState),this.shootTimer=0,this.maxShootTimer=d.DEFAULT_MAX_SHOOT_TIMER,this.exhaust=new h,this.exhaustTimer=0,this.maxExhaustTimer=d.DEFAULT_MAX_EXHAUST_TIMER,this.health=s.localClient.data.health,this.maxHealth=s.localClient.data.health,this.rotate(.5*-Math.PI)};Object.defineProperties(d,{TURN_SPEED:{value:.05},BRAKE_RATE:{value:.95},BOOST_ACCELERATION:{value:2e-4},POSITION_UPDATE_DISTANCE:{value:.5},MINIMAP_FILL_STYLE:{value:"#86c8d3"},DEFAULT_MAX_SHOOT_TIMER:{value:20},MIN_EXHAUST_ACCELERATION:{value:4e-4},DEFAULT_MAX_EXHAUST_TIMER:{value:10},STATE:{value:{EXPLOSION:"explosion"}}}),d.prototype=Object.freeze(Object.create(r.prototype,{update:{value:function(t){if(r.prototype.update.call(this,t),this.justShot()&&(this.shootTimer++,this.shootTimer>=this.maxShootTimer&&(this.shootTimer=0)),this.health>0){if(this.acceleration.getMagnitudeSquared()>d.MIN_EXHAUST_ACCELERATION*d.MIN_EXHAUST_ACCELERATION&&0===this.exhaustTimer){var e=this.forward.clone().multiply(.5*-this.defaultGraphic.height);this.exhaust.addParticle(e,this.velocity)}this.exhaustTimer+=t,this.exhaustTimer>=this.maxExhaustTimer&&(this.exhaustTimer=0)}this.exhaust.update(t),this.sendUpdateToServer()}},sendUpdateToServer:{value:function(){s.connected&&s.socket.emit("updateOther",{position:this.position,velocity:this.velocity,acceleration:this.acceleration,rotation:this.getRotation()})}},draw:{value:function(t){r.prototype.draw.call(this,t),this.exhaust.draw(t)}},drawOnMinimap:{value:function(t){var e=this.getWidth(),i=this.getHeight(),a=Math.round(.5*-e),o=Math.round(.5*-i),s=Math.round(e),n=Math.round(i);t.save(),t.fillStyle=d.MINIMAP_FILL_STYLE,t.fillRect(a,o,s,n),t.restore()}},shoot:{value:function(){this.justShot()||(this.shootTimer=1,s.connected&&s.socket.emit("bullet",{position:this.position,velocity:this.velocity,acceleration:this.acceleration,rotation:this.getRotation()}))}},justShot:{value:function(){return this.shootTimer>0}},resolveCollision:{value:function(t,e){var i=this.customData.team,a=t.customData.team;(void 0===a||a!==i||t.takeDamage)&&r.prototype.resolveCollision.call(this,t,e)}}})),Object.freeze(d),e.exports=d},{"../network":12,"../particles":21,"../util":30}],6:[function(t,e,i){"use strict";var a=t("./FullBlock.js"),o=t("./HalfBlock.js"),s=t("./Player.js"),n=t("./ClientPlayer.js"),r=t("./Bullet.js");e.exports={FullBlock:a,HalfBlock:o,Player:s,ClientPlayer:n,Bullet:r}},{"./Bullet.js":1,"./ClientPlayer.js":2,"./FullBlock.js":3,"./HalfBlock.js":4,"./Player.js":5}],7:[function(t,e,i){"use strict";var a=t("./network"),o=t("./util"),s=(o.Assets,t("./scenes")),n=(t("./overlays"),document.querySelector("#game-canvas")),r=wfl.create(n),l=new s.LoadingScene(n);r.setScene(l),r.stop();var h=n.getContext("2d");h.fillStyle="#040B0C",h.fillRect(0,0,n.width,n.height);var c=function(){$(a).on(a.Event.CONNECT,g),a.init()},d=function(t){r.update(Date.now()),$(r.getScene()).off();var e=new s.GameScene(n,t);r.setScene(e),$(a).on(a.Event.END_GAME,y),$(a).on(a.Event.GAME_OVER_DATA,t,b),r.start()},m=function(t){r.stop(),$(a).off();var e=new s.GameStartScene(n,t);r.setScene(e),$(e).on(s.GameStartScene.Event.START_GAME,f)},p=function(){h.fillStyle="#040B0C",h.fillRect(0,0,n.width,n.height),r.stop(),$(r.getScene()).off(),$(a).off();var t=new s.LobbyScene(n);r.setScene(t),$(a).on(a.Event.START_GAME,v),$("body").css({"background-color":"#071213"})},u=function(t){r.stop(),$(a).off();var e=new s.GameOverScene(n,t);r.setScene(e),$(e).on(s.GameOverScene.Event.RETURN_TO_LOBBY,O)},v=function(t,e){m(e)},y=function(t,e){u(e)},f=function(t,e){d(e)},b=function(t,e){u(t.data),r.getScene()._onUpdateScore(e)},O=function(t,e){p(),a._onEnterRoomSuccess(e)},g=function(){p()};new o.Preloader(c.bind(this))},{"./network":12,"./overlays":18,"./scenes":27,"./util":30}],8:[function(t,e,i){"use strict";var a=t("../entities"),o=a.FullBlock,s=a.HalfBlock,n=function(t){for(var e=128,i=0;16>i;i++){var a=new o;a.position.x=e*i,a.position.y=0,t.addGameObject(a)}for(var i=0;16>i;i++){var a=new o;a.position.x=e*i,a.position.y=10*e,t.addGameObject(a)}for(var i=1;10>i;i++){var a=new o;a.position.x=0,a.position.y=e*i,t.addGameObject(a)}for(var i=1;10>i;i++){var a=new o;a.position.x=15*e,a.position.y=e*i,t.addGameObject(a)}var n;n=new o,n.position.x=3*e,n.position.y=3*e,t.addGameObject(n),n=new o,n.position.x=4*e,n.position.y=4*e,t.addGameObject(n),n=new o,n.position.x=7*e,n.position.y=4*e,t.addGameObject(n),n=new o,n.position.x=8*e,n.position.y=6*e,t.addGameObject(n),n=new o,n.position.x=11*e,n.position.y=6*e,t.addGameObject(n),n=new o,n.position.x=12*e,n.position.y=7*e,t.addGameObject(n),n=new s,n.position.x=1*e,n.position.y=6*e,t.addGameObject(n),n=new s,n.position.x=4*e,n.position.y=3*e,t.addGameObject(n),n=new s,n.position.x=4*e,n.position.y=9*e,t.addGameObject(n),n=new s,n.position.x=8*e,n.position.y=5*e,t.addGameObject(n),n=new s,n.position.x=7*e,n.position.y=5*e,n.rotate(Math.PI),t.addGameObject(n),n=new s,n.position.x=11*e,n.position.y=1*e,n.rotate(Math.PI),t.addGameObject(n),n=new s,n.position.x=11*e,n.position.y=7*e,n.rotate(Math.PI),t.addGameObject(n),n=new s,n.position.x=14*e,n.position.y=4*e,n.rotate(Math.PI),t.addGameObject(n)};Object.freeze(n),e.exports=n},{"../entities":6}],9:[function(t,e,i){"use strict";var a=t("./Level1.js");e.exports={Level1:a}},{"./Level1.js":8}],10:[function(t,e,i){"use strict";var a=(t("../entities"),function(t,e){this.id=t,this.data=e,this.gameObject=void 0});Object.freeze(a),e.exports=a},{"../entities":6}],11:[function(t,e,i){"use strict";var a=(t("../entities"),function(t,e){this.id=t,this.data=e,this.gameObject=void 0});Object.freeze(a),e.exports=a},{"../entities":6}],12:[function(t,e,i){"use strict";var a={socket:void 0,localClient:{},clients:{},rooms:{},connected:!1,hostId:-1,Event:{CONNECT:"connect",UPDATE_ROOMS:"updateRooms",ENTER_ROOM_SUCCESS:"enterRoomSuccess",ENTER_ROOM_FAIL:"enterRoomFail",PLAY:"play",START_GAME:"startGame",END_GAME:"endGame",PLAYER_DEATH:"playerDeath",PLAYER_RESPAWN:"playerRespawn",BULLET:"bullet",CLOCK_TICK:"clockTick",COUNTDOWN:"countdown",GAME_START_DATA:"gameStartData",GAME_OVER_DATA:"gameOverData"},init:function(){this.socket=io.connect(),this.socket.on("confirm",this._onConfirmClient.bind(this)),this.socket.on("addOther",this._onAddOtherClient.bind(this)),this.socket.on("removeOther",this._onRemoveOtherClient.bind(this)),this.socket.on("loadPrevious",this._onLoadPreviousClients.bind(this)),this.socket.on("updateOther",this._onUpdateClient.bind(this)),this.socket.on("updateRooms",this._onUpdateRooms.bind(this)),this.socket.on("enterRoomSuccess",this._onEnterRoomSuccess.bind(this)),this.socket.on("enterRoomFail",this._onEnterRoomFail.bind(this)),this.socket.on("ping",this._onPing.bind(this)),this.socket.on("setHost",this._onSetHost.bind(this)),this.socket.on("startGame",this._onStartGame.bind(this)),this.socket.on("endGame",this._onEndGame.bind(this)),this.socket.on("playerDeath",this._onPlayerDeath.bind(this)),this.socket.on("playerRespawn",this._onPlayerRespawn.bind(this)),this.socket.on("bullet",this._onBullet.bind(this)),this.socket.on("countdown",this._onCountdown.bind(this)),this.socket.on("clockTick",this._onClockTick.bind(this)),this.socket.on("gameStartData",this._onGameStartData.bind(this)),this.socket.on("gameOverData",this._onGameOverData.bind(this)),this.socket.emit("init",{user:$("#userName").html()})},getRooms:function(){this.socket.emit("updateRooms")},createRoom:function(t){var e={name:t,enter:!0};this.socket.emit("createRoom",e)},enterRoom:function(t){this.socket.emit("enterRoom",t)},leaveRoom:function(t){this.socket.emit("leaveRoom",t)},switchTeam:function(t){this.socket.emit("switchTeam",t)},isHost:function(){return this.hostId===this.localClient.id},_onConfirmClient:function(t){var e=t.id;this.localClient=new s(e,t),this.clients[e]=this.localClient,this.connected=!0,$(this).trigger(this.Event.CONNECT)},_onAddOtherClient:function(t){var e=t.id,i=new o(e,t);this.clients[t.id]=i},_onRemoveOtherClient:function(t){this.clients[t.id]=void 0,delete this.clients[t.id]},_onLoadPreviousClients:function(t){for(var e=Object.keys(t),i=0;i<e.length;i++){var a=parseInt(e[i]),o=t[a];this._onAddOtherClient(o)}},_onUpdateClient:function(t){var e=t.id,i=this.clients[e];i.data=t,i.gameObject&&(i.gameObject.position.x=t.position.x,i.gameObject.position.y=t.position.y,i.gameObject.velocity.x=t.velocity.x,i.gameObject.velocity.y=t.velocity.y,i.gameObject.acceleration.x=t.acceleration.x,i.gameObject.acceleration.y=t.acceleration.y,i.gameObject.setRotation(t.rotation))},_onUpdateRooms:function(t){this.rooms=t,$(this).trigger(this.Event.UPDATE_ROOMS,t)},_onEnterRoomSuccess:function(t){$(this).trigger(this.Event.ENTER_ROOM_SUCCESS,t)},_onEnterRoomFail:function(t){$(this).trigger(this.Event.ENTER_ROOM_FAIL,t)},_onPing:function(t){t&&this.socket.emit("returnPing",t)},_onSetHost:function(t){this.hostId=t.id},_onStartGame:function(t){$(this).trigger(this.Event.START_GAME,t)},_onEndGame:function(t){for(var e=this.rooms[t.id],i=0;i<e.players.length;i++)this.clients[e.players[i]].data.ready=!1;this.localClient.data.ready=!1,$(this).trigger(this.Event.END_GAME,t)},_onPlayerDeath:function(t){$(this).trigger(this.Event.PLAYER_DEATH,t)},_onPlayerRespawn:function(t){$(this).trigger(this.Event.PLAYER_RESPAWN,t)},_onBullet:function(t){$(this).trigger(this.Event.BULLET,t)},_onCountdown:function(t){$(this).trigger(this.Event.COUNTDOWN,t)},_onClockTick:function(t){$(this).trigger(this.Event.CLOCK_TICK,t)},_onGameStartData:function(t){$(this).trigger(this.Event.GAME_START_DATA,t)},_onGameOverData:function(t){$(this).trigger(this.Event.GAME_OVER_DATA,t)}};e.exports=a;var o=t("./Client.js"),s=t("./LocalClient.js")},{"./Client.js":10,"./LocalClient.js":11}],13:[function(t,e,i){"use strict";var a=t("./Overlay.js"),o=function(){a.call(this),this.inputField=$("<input>"),this.inputField.attr({placeholder:"Room Name"}),this.inputField.attr({maxlength:30}),this.inputField.addClass("create-room-overlay-input"),this.buttonContainer=$("<div>"),this.buttonContainer.addClass("create-room-overlay-button-container"),this.cancelBtn=$("<button>"),this.cancelBtn.text("Cancel"),this.buttonContainer.append(this.cancelBtn),this.createBtn=$("<button>"),this.createBtn.text("Create"),this.buttonContainer.append(this.createBtn),this.domObject.append(this.inputField),this.domObject.append(this.buttonContainer),this.domObject.addClass("create-room-overlay")};o.prototype=Object.freeze(Object.create(a.prototype,{})),e.exports=o},{"./Overlay.js":17}],14:[function(t,e,i){"use strict";var a=t("./Overlay.js"),o=t("../network"),s=function(){a.call(this),this.resultsLabel=$("<div>"),this.resultsLabel.html("Results"),this.resultsLabel.addClass("game-over-overlay-results-label"),this.teamAContainer=$("<div>"),this.teamAContainer.addClass("lobby-overlay-teamA-container"),this.teamBContainer=$("<div>"),this.teamBContainer.addClass("lobby-overlay-teamB-container"),this.returnToLobbyBtn=$("<button>"),this.returnToLobbyBtn.text("Return to Lobby"),this.returnToLobbyBtn.addClass("game-over-overlay-return-to-lobby-button"),this.domObject.append(this.resultsLabel),this.domObject.append(this.loadingIcon),this.domObject.append(this.teamAContainer),this.domObject.append(this.teamBContainer),this.domObject.append(this.returnToLobbyBtn),this.domObject.addClass("game-over-overlay"),this.domObject.addClass("fade-in"),this.renderScore()};s.prototype=Object.freeze(Object.create(a.prototype,{renderScore:{value:function(t){this.teamAContainer.html(""),this.teamBContainer.html("");var e=$("<span>");e.html("Rose Team"),e.addClass("game-over-overlay-team-label");var i=$("<span>");i.html("K"),i.addClass("game-over-overlay-team-kill-label");var a=$("<span>");a.html("D"),a.addClass("game-over-overlay-team-death-label"),this.teamAContainer.append(e),this.teamAContainer.append(i),this.teamAContainer.append(a);var s=$("<span>");s.html("Sky Team"),s.addClass("game-over-overlay-team-label");var n=$("<span>");n.html("K"),n.addClass("game-over-overlay-team-kill-label");var r=$("<span>");if(r.html("D"),r.addClass("game-over-overlay-team-death-label"),this.teamBContainer.append(s),this.teamBContainer.append(n),this.teamBContainer.append(r),!t){var l=$("<div>");l.html("Loading..."),e.append(l);var h=$("<div>");return h.html("Loading..."),void s.append(h)}var c=t.teamA,d=t.teamB,m=o.localClient.id,p=$("<span>"),u=$("<span>"),v=$("<span>");p.addClass("game-over-overlay-name-container"),u.addClass("game-over-overlay-kills-container"),v.addClass("game-over-overlay-deaths-container");var y=$("<span>"),f=$("<span>"),b=$("<span>");y.addClass("game-over-overlay-name-container"),f.addClass("game-over-overlay-kills-container"),b.addClass("game-over-overlay-deaths-container");for(var O=0;4>O;O++){var g,E,_,C=$("<div>"),R=$("<div>"),T=$("<div>");if(O<c.length){var S=c[O];g=S.user,E=S.kills,_=S.deaths,S.id===m&&(g="*"+g)}else g="------",E="-",_="-";C.html(g),R.html(E),T.html(_),p.append(C),u.append(R),v.append(T)}this.teamAContainer.append(p),this.teamAContainer.append(u),this.teamAContainer.append(v);for(var O=0;4>O;O++){var g,E,_,C=$("<div>"),R=$("<div>"),T=$("<div>");if(O<d.length){var S=d[O];g=S.user,E=S.kills,_=S.deaths,S.id===m&&(g="*"+g)}else g="------",E="-",_="-";C.html(g),R.html(E),T.html(_),y.append(C),f.append(R),b.append(T)}this.teamBContainer.append(y),this.teamBContainer.append(f),this.teamBContainer.append(b)}}})),e.exports=s},{"../network":12,"./Overlay.js":17}],15:[function(t,e,i){"use strict";var a=t("./Overlay.js"),o=function(){a.call(this),this.domObject.addClass("loading-overlay-bg"),this.loadingIcon=$("<div>"),this.loadingIcon.addClass("loading-overlay"),this.domObject.append(this.loadingIcon)};o.prototype=Object.freeze(Object.create(a.prototype,{})),e.exports=o},{"./Overlay.js":17}],16:[function(t,e,i){"use strict";var a=t("./Overlay.js"),o=t("../network"),s=function(){a.call(this),this.leftContainer=$("<span>"),this.leftContainer.addClass("lobby-overlay-left"),this.leftContainer.addClass("lobby-overlay-maximized-side"),this.roomButtonContainer=$("<div>"),this.roomButtonContainer.addClass("lobby-overlay-button-container"),this.leftContainer.append(this.roomButtonContainer),this.selectRoomLabel=$("<div>"),this.selectRoomLabel.html("Select or create room"),this.roomButtonContainer.append(this.selectRoomLabel),this.roomButtonContainer.append($("<br>")),this.createRoomBtn=$("<button>"),this.createRoomBtn.text("Create Room"),this.roomButtonContainer.append(this.createRoomBtn),this.roomListContainer=$("<div>"),this.roomListContainer.addClass("lobby-overlay-room-list"),this.roomListContainer.html("Loading rooms..."),this.leftContainer.append(this.roomListContainer),this.kdrContainer=$("<div>"),this.kdrContainer.addClass("lobby-overlay-kdr-container"),this.leftContainer.append(this.kdrContainer),this.renderKdr(),this.rightContainer=$("<span>"),this.rightContainer.addClass("lobby-overlay-right"),this.rightContainer.addClass("lobby-overlay-minimized-side"),this.selectedRoomLabel=$("<div>"),this.selectedRoomLabel.addClass("lobby-overlay-room-label-container"),this.renderRoomLabel(),this.rightContainer.append(this.selectedRoomLabel),this.switchTeamBtn=$("<button>"),this.switchTeamBtn.text("Switch Teams"),this.switchTeamBtn.addClass("lobby-overlay-switch-team-btn"),this.teamAContainer=$("<div>"),this.teamAContainer.addClass("lobby-overlay-teamA-container"),this.teamBContainer=$("<div>"),this.teamBContainer.addClass("lobby-overlay-teamB-container"),this.renderPlayers(),this.rightContainer.append(this.teamAContainer),this.rightContainer.append(this.switchTeamBtn),this.rightContainer.append(this.teamBContainer),this.leaveRoomBtn=$("<button>"),this.leaveRoomBtn.text("Leave Room"),this.leaveRoomBtn.addClass("lobby-overlay-leave-room-btn"),this.leaveRoomBtn.hide(),this.rightContainer.append(this.leaveRoomBtn),this.readyBtn=$("<button>"),this.readyBtn.text("Ready"),this.readyBtn.addClass("lobby-overlay-ready-btn"),this.readyBtn.hide(),this.rightContainer.append(this.readyBtn),this.domObject.append(this.leftContainer),this.domObject.append(this.rightContainer),this.domObject.addClass("lobby-overlay"),this.domObject.addClass("fade-in")};Object.defineProperties(s,{Event:{value:{ENTER_ROOM:"enterRoom"}}}),s.prototype=Object.freeze(Object.create(a.prototype,{showRooms:{value:function(t){this.roomListContainer.html(""),$(".lobby-overlay-room").off("click");var e=Object.keys(t);if(0===e.length)this.roomListContainer.html("No rooms available");else for(var i=0;i<e.length;i++){var a=t[e[i]],o=$("<div>");o.addClass("lobby-overlay-room"),o.html(a.name),$(o).on("click",a,this._onClickRoom.bind(this)),this.roomListContainer.append(o)}}},renderRoom:{value:function(t){void 0===t?(this.renderRoomLabel(),this.renderPlayers(),this._onExitRoom()):(this.renderRoomLabel(t.name),this.renderPlayers(t),this._onEnterRoom())}},renderRoomLabel:{value:function(t){"string"==typeof t&&""!==t||(t="No room selected"),t="Current room: "+t,this.selectedRoomLabel.html(t)}},renderPlayers:{value:function(t){if(this.teamAContainer.html(""),this.teamBContainer.html(""),this.switchTeamBtn.hide(),void 0!==t){var e=t.teamA,i=t.teamB,a=$("<div>");a.html("Rose Team"),a.addClass("lobby-overlay-team-label"),this.teamAContainer.append(a);var s=$("<div>");s.html("Sky Team"),s.addClass("lobby-overlay-team-label"),this.teamBContainer.append(s);for(var n=o.localClient.id,r=0;4>r;r++){var l,h=$("<div>"),c=!1;if(r<e.length){var d=e[r],m=o.clients[d];c=m.data.ready,l=m.data.user,d===n&&(l="*"+l,c?(this.readyBtn.html("Cancel"),this.switchTeamBtn.prop("disabled",!0)):(this.readyBtn.html("Ready"),this.switchTeamBtn.prop("disabled",!1)))}else l="------";if(h.html(l),this.teamAContainer.append(h),c){var p=$("<span>");p.html("Ready"),p.addClass("lobby-overlay-ready-container"),h.append(p)}}for(var r=0;4>r;r++){var l,h=$("<div>"),c=!1;if(r<i.length){var d=i[r],m=o.clients[d];c=m.data.ready,l=m.data.user,d===n&&(l="*"+l,c?(this.readyBtn.html("Cancel"),this.switchTeamBtn.prop("disabled",!0)):(this.readyBtn.html("Ready"),this.switchTeamBtn.prop("disabled",!1)))}else l="------";if(h.html(l),this.teamBContainer.append(h),c){var p=$("<span>");p.html("Ready"),p.addClass("lobby-overlay-ready-container"),h.append(p)}}this.switchTeamBtn.show()}}},renderKdr:{value:function(t){if(t){var e,i=t.kills,a=t.deaths;e=0===a?i:Math.floor(i/a*100)/100,this.kdrContainer.html("KDR: "+e.toFixed(2))}else this.kdrContainer.html("KDR: ---")}},_onClickRoom:{value:function(t){var e=t.data,i={name:e.name,id:e.id};$(this).trigger(s.Event.ENTER_ROOM,i)}},_onExitRoom:{value:function(){this.leaveRoomBtn.hide(),this.readyBtn.hide(),this.leftContainer.removeClass("lobby-overlay-minimized-side"),this.rightContainer.removeClass("lobby-overlay-maximized-side"),this.leftContainer.addClass("lobby-overlay-maximized-side"),this.rightContainer.addClass("lobby-overlay-minimized-side")}},_onEnterRoom:{value:function(){this.leaveRoomBtn.show(),this.readyBtn.show(),this.leftContainer.removeClass("lobby-overlay-maximized-side"),this.rightContainer.removeClass("lobby-overlay-minimized-side"),this.leftContainer.addClass("lobby-overlay-minimized-side"),this.rightContainer.addClass("lobby-overlay-maximized-side")}}})),Object.freeze(s),e.exports=s},{"../network":12,"./Overlay.js":17}],17:[function(t,e,i){"use strict";var a=function(){this.domObject=$("<div>"),this.domObject.addClass("canvas-overlay")};a.prototype=Object.freeze(Object.create(a.prototype,{})),e.exports=a},{}],18:[function(t,e,i){"use strict";var a=t("./Overlay.js"),o=t("./LoadingOverlay.js"),s=t("./CreateRoomOverlay.js"),n=t("./GameOverOverlay.js"),r=t("./LobbyOverlay.js");e.exports={Overlay:a,LoadingOverlay:o,CreateRoomOverlay:s,GameOverOverlay:n,LobbyOverlay:r}},{"./CreateRoomOverlay.js":13,"./GameOverOverlay.js":14,"./LoadingOverlay.js":15,"./LobbyOverlay.js":16,"./Overlay.js":17}],19:[function(t,e,i){"use strict";var a=t("../util"),o=(a.Assets,wfl.core.entities.GameObject),s=t("./EmitterParticle.js"),n=(wfl.geom,function(){o.call(this),this.particles=[],this.angleRange=n.DEFAULT_ANGLE_OFFSET_RANGE,this.maxParticles=n.DEFAULT_MAX_PARTICLES});Object.defineProperties(n,{DEFAULT_ANGLE_OFFSET_RANGE:{value:.675},DEFAULT_MAX_PARTICLES:{value:150}}),n.prototype=Object.freeze(Object.create(o.prototype,{addParticle:{value:function(t,e){this.particles.length>this.maxParticles&&this.particles.splice(0,1);var i=Math.random()*this.angleRange-.5*this.angleRange,a=new s;a.position=t.clone(),a.velocity=e.clone().multiply(-1),a.velocity.rotate(i);var o=Math.floor(2*Math.random()),n=0,r=0,l=0;switch(o){case 0:n=223,r=44,l=56;break;case 1:n=246,r=110,l=73}a.red=n,a.green=r,a.blue=l,this.particles.push(a)}},update:{value:function(t){for(var e=this.particles.length-1;e>=0;e--){var i=this.particles[e];i.update(t),i.age>=i.lifeTime&&this.particles.splice(e,1)}}},draw:{value:function(t){for(var e=this.particles.length-1;e>=0;e--)this.particles[e].draw(t)}}})),Object.freeze(n),e.exports=n},{"../util":30,"./EmitterParticle.js":20}],20:[function(t,e,i){"use strict";var a=t("../util"),o=(a.Assets,wfl.core.entities.PhysicsObject),s=(wfl.geom,function(){o.call(this),this.age=0,this.lifeTime=s.DEFAULT_LIFE_TIME,this.red=0,this.green=0,this.blue=0,this.startSize=s.DEFAULT_START_SIZE,this.size=this.startSize,this.decayRate=s.DEFAULT_DECAY_RATE,this.expansionRate=s.DEFAULT_EXPANSION_RATE});Object.defineProperties(s,{DEFAULT_LIFE_TIME:{value:100},DEFAULT_START_SIZE:{value:5},DEFAULT_DECAY_RATE:{value:2.35},DEFAULT_EXPANSION_RATE:{value:.25},MAX_ALPHA:{value:1}}),s.prototype=Object.freeze(Object.create(o.prototype,{update:{value:function(t){this.age<this.lifeTime&&(o.prototype.update.call(this,t),this.age+=this.decayRate,this.size+=this.expansionRate)}},draw:{value:function(t){var e=s.MAX_ALPHA*(1-this.age/this.lifeTime);t.save(),t.translate(this.position.x,this.position.y),t.beginPath(),t.globalAlpha*=e,t.fillStyle="rgb("+this.red+","+this.green+","+this.blue+")",t.rect(.5*-this.size,.5*-this.size,this.size,this.size),t.fill(),t.restore()}}})),Object.freeze(s),e.exports=s},{"../util":30}],21:[function(t,e,i){"use strict";var a=t("./EmitterParticle.js"),o=t("./Emitter.js");e.exports={Emitter:o,EmitterParticle:a}},{"./Emitter.js":19,"./EmitterParticle.js":20}],22:[function(t,e,i){"use strict";var a=wfl.display.Scene,o=t("../overlays"),s=t("../network"),n=function(t,e){a.call(this,t),this.room=e,$(s).on(s.Event.GAME_OVER_DATA,this._onUpdateScore.bind(this)),s.isHost()&&s.socket.emit(s.Event.GAME_OVER_DATA,e.id),this.gameOverOverlay=new o.GameOverOverlay,$(t).parent().append(this.gameOverOverlay.domObject),this.loadingOverlay=new o.LoadingOverlay,$(t).parent().append(this.loadingOverlay.domObject),this.gameOverOverlay.returnToLobbyBtn.click(this._onReturnToLobby.bind(this))};Object.defineProperties(n,{Event:{value:{RETURN_TO_LOBBY:"returnToLobby"}}}),n.prototype=Object.freeze(Object.create(a.prototype,{destroy:{value:function(){this.gameOverOverlay.domObject.remove(),this.loadingOverlay.domObject.remove()}},_onUpdateScore:{value:function(t,e){this.loadingOverlay.domObject.remove(),this.gameOverOverlay.renderScore(e);for(var i,a=e.teamA,o=e.teamB,n=0;n<a.length;n++)if(a[n].id===s.localClient.id){i=a[n];break}for(var n=0;n<o.length;n++)if(o[n].id===s.localClient.id){i=o[n];break}this._sendScoreToServer(i)}},_onReturnToLobby:{value:function(t){$(this).trigger(n.Event.RETURN_TO_LOBBY,this.room)}},_sendScoreToServer:{value:function(t){var e=t.kills,i=t.deaths,a=$("#scoreForm"),o=a.serialize();o+="&kills="+e,o+="&deaths="+i,o+="&username="+t.user,$.ajax({cache:!1,type:"POST",url:"/score",data:o,dataType:"json"})}}})),Object.freeze(n),e.exports=n},{"../network":12,"../overlays":18}],23:[function(t,e,i){"use strict";var a=t("../util"),o=a.Assets,s=wfl.display.Scene,n=t("../network"),r=wfl.core.entities.GameObject,l=wfl.core.entities.PhysicsObject,h=t("../entities"),c=h.Bullet,d=h.ClientPlayer,m=h.Player,p=t("../levels"),u=wfl.display.backgrounds,v=wfl.geom,y=function(t,e){s.call(this,t,e);var e=n.rooms[e.id];this.players=e.players;for(var i=0;i<this.players.length;i++){var a=this.players[i],r=n.clients[a];if(r!==n.localClient){var l=new d(r.data.team);r.gameObject=l,r.gameObject.customData.clientId=r.data.id,r.gameObject.position.x=r.data.position.x,r.gameObject.position.y=r.data.position.y,r.gameObject.setRotation(r.data.rotation),r.gameObject.customData.spawnPosition=r.data.position,r.gameObject.customData.spawnRotation=r.data.rotation,this.addGameObject(l,1)}}$(n).on(n.Event.BULLET,this.onBullet.bind(this)),$(n).on(n.Event.CLOCK_TICK,this.onClockTick.bind(this)),$(n).on(n.Event.COUNTDOWN,this.onCountdown.bind(this)),$(n).on(n.Event.PLAYER_DEATH,this.onPlayerDeath.bind(this)),$(n).on(n.Event.PLAYER_RESPAWN,this.onPlayerRespawn.bind(this)),p.Level1(this),this.timeRemaining=e.timeRemaining,this.initialCountdown=e.countdown,this.countingDown=!0,this.respawnTime=e.respawnTime,this.respawnTimeRemaining=this.respawnTime,this.bg=new u.ParallaxBackground(o.get(o.BG_TILE)),this.player=new m(n.localClient.data.team),this.player.position.x=n.localClient.data.position.x,this.player.position.y=n.localClient.data.position.y,this.player.setRotation(n.localClient.data.rotation),this.player.customData.spawnPosition=n.localClient.data.position,this.player.customData.spawnRotation=n.localClient.data.rotation,n.localClient.gameObject=this.player,this.player.customData.clientId=n.localClient.data.id,this.addGameObject(this.player,2),this.camera.follow(this.player),this.camera.position.x=this.player.position.x,this.camera.position.y=this.player.position.y};Object.defineProperties(y,{FRICTION:{value:.925},MINIMAP:{value:Object.freeze({WIDTH:150,HEIGHT:100,SCALE:.1,FILL_STYLE:"#192427"})}}),y.prototype=Object.freeze(Object.create(s.prototype,{update:{value:function(t){this.countingDown===!0?(this.initialCountdown-=t,n.isHost()&&this.sendCountdown(),this.initialCountdown<=0&&(this.countingDown=!1)):(s.prototype.update.call(this,t),
this.timeRemaining-=t,0===this.player.health?this._handlePlayerDeath(t):this._handleInput(),this._applyFriction(),this._removeDeadGameObjects(),n.isHost()&&this.sendClockTick())}},sendCountdown:{value:function(){n.connected&&n.socket.emit("countdown",{countdown:this.initialCountdown})}},sendClockTick:{value:function(){n.connected&&n.socket.emit("clockTick",{timeRemaining:this.timeRemaining})}},sendPlayerDeath:{value:function(){n.connected&&n.socket.emit("playerDeath",{dead:this.player.customData.clientId,killer:this.player.customData.killer.customData.clientId})}},draw:{value:function(t){s.prototype.draw.call(this,t),t.save();var e=this.camera.position,i=t.canvas.width,a=t.canvas.height,r=new v.Vec2(.5*i,.5*a);t.fillStyle="#fff",t.textAlign="center",t.textBaseline="top",t.font="12px Munro";for(var l=0;l<this.players.length;l++){var h=n.clients[this.players[l]],c=new v.Vec2(h.gameObject.position.x-e.x,h.gameObject.position.y-e.y);t.save(),t.translate(c.x,c.y+24),t.translate(r.x,r.y),t.fillText(h.data.user,0,0),t.restore()}t.font="24px Munro";var d;if(this.timeRemaining>0){var m=Math.floor(this.timeRemaining/6e4),p=Math.floor((this.timeRemaining-1e3*m*60)/1e3);d=m+":",10>p&&(d+="0"),d+=p}else d="0:00";if(this.timeRemaining<1e4?(this.timeRemaining%500<250?t.fillStyle="rgb(255, 79, 79)":t.fillStyle="rgba(0, 0, 0, 0)",t.font="30px Munro"):this.timeRemaining<3e4&&(t.fillStyle="rgb(241, 208, 92)"),t.translate(r.x,0),t.fillText(d,0,0),this.initialCountdown>0){var u=Math.round(this.initialCountdown/1e3),y=u.toString();switch(t.fillStyle="#fff",u){default:case 5:t.fillStyle="rgb(255, 79, 79)";break;case 4:t.fillStyle="rgb(247, 155, 87)";break;case 3:t.fillStyle="rgb(241, 208, 92)";break;case 2:t.fillStyle="rgb(215, 235, 99)";break;case 1:t.fillStyle="rgb(132, 231, 103)";break;case 0:y="FIGHT",t.fillStyle="#fff"}t.translate(0,r.y),t.textAlign="center",t.textBaseline="middle",t.font="96px Munro",t.fillText(y,0,0),t.fillStyle="#fff",t.translate(0,48),t.font="24px Munro",t.fillText("Use Arrow Keys to Move",0,0),t.translate(0,24),t.fillText("Press Z to Shoot",0,0)}t.restore(),t.save(),t.translate(4,4);for(var l=0;l<this.player.maxHealth;l++){var f;f=this.player.health>l?o.get(o.HP_FULL):o.get(o.HP_EMPTY),t.drawImage(f,0,0),t.translate(24,0)}if(t.restore(),this.player.health<=0){t.save();var b=Math.round(this.respawnTimeRemaining/1e3),O="Respawn in "+b.toString()+" seconds";t.translate(r.x,r.y),t.textAlign="center",t.textBaseline="middle",t.font="48px Munro",t.fillStyle="#fff",t.fillText(O,0,0),t.restore()}}},onCountdown:{value:function(t,e){this.initialCountdown=e.countdown}},onClockTick:{value:function(t,e){this.timeRemaining=parseInt(e.timeRemaining)}},onBullet:{value:function(t,e){var i=l.prototype.getDisplayAngle(e.rotation),a=v.Vec2.fromAngle(i),o=n.clients[e.playerId].gameObject,s=new c(1,o);s.position.x=e.position.x,s.position.y=e.position.y,s.velocity.x=a.x,s.velocity.y=a.y,s.rotate(i),s.velocity.multiply(c.DEFAULT_SPEED),s.velocity.x+=e.velocity.x,s.velocity.y+=e.velocity.y,s.velocity.getMagnitudeSquared()<c.DEFAULT_SPEED*c.DEFAULT_SPEED&&s.velocity.setMagnitude(c.DEFAULT_SPEED),this.addGameObject(s,1)}},onPlayerDeath:{value:function(t,e){var i=n.clients[e.dead].gameObject;i.solid=!1,i.setState(m.STATE.EXPLOSION)}},onPlayerRespawn:{value:function(t,e){var i=n.clients[e.respawn].gameObject;i.position.x=i.customData.spawnPosition.x,i.position.y=i.customData.spawnPosition.y,i.setRotation(i.customData.spawnRotation),i.setState(r.STATE.DEFAULT),i.health=i.maxHealth,i.solid=!0,i.takeDamage(0),i===this.player&&this.camera.follow(i)}},_handleInput:{value:function(){var t=this.player,e=this.keyboard,i=e.isPressed(e.LEFT),a=e.isPressed(e.RIGHT),o=e.isPressed(e.UP),s=e.isPressed(e.DOWN),n=e.isPressed(e.Z);if(i||a){var r=0;i&&(r-=m.TURN_SPEED),a&&(r+=m.TURN_SPEED),t.rotate(r)}if(o){var l=v.Vec2.fromAngle(t.getRotation());l.multiply(m.BOOST_ACCELERATION*t.mass),t.addForce(l)}s&&t.velocity.multiply(m.BRAKE_RATE),n&&t.shoot()}},_handlePlayerDeath:{value:function(t){this.player.customData.killer&&(this.sendPlayerDeath(),this.camera.follow(this.player.customData.killer),this.player.customData.killer=void 0,this.player.setState(m.STATE.EXPLOSION),this.respawnTimeRemaining=this.respawnTime),this.respawnTimeRemaining-=t}},_applyFriction:{value:function(){for(var t=this.getGameObjects(),e=0;e<t.length;e++){var i=t[e];i.customData.ignoreFriction||(i.acceleration.multiply(y.FRICTION),i.velocity.multiply(y.FRICTION))}}},_removeDeadGameObjects:{value:function(){for(var t=this.getGameObjects(),e=t.length-1;e>=0;e--){var i=t[e];i.customData.removed===!0&&this.removeGameObject(i)}}}})),e.exports=y},{"../entities":6,"../levels":9,"../network":12,"../util":30}],24:[function(t,e,i){"use strict";var a=wfl.display.Scene,o=t("../overlays"),s=t("../network"),n=function(t,e){a.call(this,t),this.room=e,$(s).on(s.Event.GAME_START_DATA,this._onGetStartData.bind(this)),s.isHost()&&s.socket.emit(s.Event.GAME_START_DATA,e.id),this.loadingOverlay=new o.LoadingOverlay,$(t).parent().append(this.loadingOverlay.domObject)};Object.defineProperties(n,{Event:{value:{START_GAME:"startGame"}}}),n.prototype=Object.freeze(Object.create(a.prototype,{destroy:{value:function(){this.loadingOverlay.domObject.remove()}},_onGetStartData:{value:function(t,e){for(var i=e.teamA,a=e.teamB,o=0;o<i.length;o++){var r=i[o];s.clients[r.id].data=r}for(var o=0;o<a.length;o++){var r=a[o];s.clients[r.id].data=r}$(this).trigger(n.Event.START_GAME,this.room)}}})),Object.freeze(n),e.exports=n},{"../network":12,"../overlays":18}],25:[function(t,e,i){"use strict";var a=wfl.display.Scene,o=t("../overlays"),s=function(t){a.call(this,t),this.loadingOverlay=new o.LoadingOverlay,$(t).parent().append(this.loadingOverlay.domObject)};s.prototype=Object.freeze(Object.create(a.prototype,{destroy:{value:function(){this.loadingOverlay.domObject.remove()}}})),e.exports=s},{"../overlays":18}],26:[function(t,e,i){"use strict";var a=wfl.display.Scene,o=t("../overlays"),s=t("../network"),n=function(t){a.call(this,t),this.curRoomId=void 0,this.lobbyOverlay=new o.LobbyOverlay,this.createRoomOverlay=new o.CreateRoomOverlay,$(t).parent().append(this.lobbyOverlay.domObject),$(t).parent().append(this.createRoomOverlay.domObject),this.createRoomOverlay.domObject.hide(),this.lobbyOverlay.leaveRoomBtn.click(this._onLeaveRoomButtonClick.bind(this)),this.lobbyOverlay.readyBtn.click(this._onReadyButtonClick.bind(this)),this.lobbyOverlay.switchTeamBtn.click(this._onSwitchTeamButtonClick.bind(this)),this.lobbyOverlay.createRoomBtn.click(this._onCreateRoomButtonClick.bind(this)),this.createRoomOverlay.cancelBtn.click(this._onCreateRoomCancel.bind(this)),this.createRoomOverlay.createBtn.click(this._onCreateRoom.bind(this)),$(this.lobbyOverlay).on(o.LobbyOverlay.Event.ENTER_ROOM,this._onEnterRoomAttempt.bind(this)),$(s).on(s.Event.UPDATE_ROOMS,this._onUpdateRoomList.bind(this)),$(s).on(s.Event.ENTER_ROOM_SUCCESS,this._onEnterRoomSuccess.bind(this)),$(s).on(s.Event.ENTER_ROOM_FAIL,this._onEnterRoomFail.bind(this)),this.roomUpdateInterval=setInterval(this.updateRoomList.bind(this),n.ROOM_UPDATE_FREQUENCY),this.updateRoomList(),this._requestKdr()};Object.defineProperties(n,{ROOM_UPDATE_FREQUENCY:{value:5e3},Event:{value:{TOGGLE_READY:"toggleReady"}}}),n.prototype=Object.freeze(Object.create(a.prototype,{destroy:{value:function(){this.lobbyOverlay.domObject.remove(),this.createRoomOverlay.domObject.remove(),this.createRoomOverlay.inputField.off("keypress"),clearInterval(this.roomUpdateInterval),$(s).off(s.Event.UPDATE_ROOMS),$(s).off(s.Event.ENTER_ROOM_SUCCESS),$(s).off(s.Event.ENTER_ROOM_FAIL)}},updateRoomList:{value:function(){s.getRooms()}},_requestKdr:{value:function(){$.ajax({cache:!1,type:"GET",url:"/getScore",dataType:"json",success:this._onGetKdr.bind(this)})}},_onGetKdr:{value:function(t,e,i){this.lobbyOverlay.renderKdr(t)}},_onLeaveRoomButtonClick:{value:function(t){s.leaveRoom(this.curRoomId),this.curRoomId=void 0}},_onReadyButtonClick:{value:function(t){var e=!s.localClient.data.ready;this.lobbyOverlay.switchTeamBtn.prop("disabled",e),s.socket.emit("updateReady",{ready:e})}},_onCreateRoomButtonClick:{value:function(t){this.createRoomOverlay.inputField.off("keypress"),this.createRoomOverlay.inputField.val(""),this.createRoomOverlay.domObject.removeClass("fade-in"),this.createRoomOverlay.domObject.show(),this.createRoomOverlay.domObject.addClass("fade-in"),this.createRoomOverlay.inputField.focus(),this.createRoomOverlay.inputField.on("keypress",this._onCreateRoomKeyPress.bind(this))}},_onCreateRoomKeyPress:{value:function(t){13===t.keyCode&&this._onCreateRoom()}},_onCreateRoomCancel:{value:function(t){this.createRoomOverlay.domObject.hide()}},_onCreateRoom:{value:function(t){var e=this.createRoomOverlay.inputField.val().trim();""!==e&&(this.createRoomOverlay.domObject.hide(),s.createRoom(e))}},_onSwitchTeamButtonClick:{value:function(t){s.switchTeam(this.curRoomId)}},_onUpdateRoomList:{value:function(t,e){this.lobbyOverlay.showRooms(e),void 0!==this.curRoomId?this.lobbyOverlay.renderRoom(e[this.curRoomId]):this.lobbyOverlay.renderRoom()}},_onEnterRoomAttempt:{value:function(t,e){s.enterRoom(e.id)}},_onEnterRoomSuccess:{value:function(t,e){this.curRoomId=e.id,this.lobbyOverlay.renderRoom(e)}},_onEnterRoomFail:{value:function(t,e){alert(e.msg),this.curRoomId=void 0,this.lobbyOverlay.renderRoom(void 0)}}})),Object.freeze(n),e.exports=n},{"../network":12,"../overlays":18}],27:[function(t,e,i){"use strict";var a=t("./LoadingScene.js"),o=t("./LobbyScene.js"),s=t("./GameStartScene.js"),n=t("./GameOverScene.js"),r=t("./GameScene.js");e.exports={LoadingScene:a,LobbyScene:o,GameStartScene:s,GameOverScene:n,GameScene:r}},{"./GameOverScene.js":22,"./GameScene.js":23,"./GameStartScene.js":24,"./LoadingScene.js":25,"./LobbyScene.js":26}],28:[function(t,e,i){"use strict";e.exports={BG_TILE:"./assets/img/BG-tile1.png",BLOCK_FULL:"./assets/img/BlockFull.png",BLOCK_HALF:"./assets/img/BlockHalf.png",SHIP_1:"./assets/img/OtherShip.png",SHIP_2:"./assets/img/Ship.png",WEAK_BULLET_1:"./assets/img/BulletWeak_a.png",WEAK_BULLET_2:"./assets/img/BulletWeak_b.png",WEAK_BULLET_3:"./assets/img/BulletWeak_c.png",WEAK_BULLET_4:"./assets/img/BulletWeak_d.png",EXPLOSION_A_1:"./assets/img/OtherExplosion1.png",EXPLOSION_A_2:"./assets/img/OtherExplosion2.png",EXPLOSION_A_3:"./assets/img/OtherExplosion3.png",EXPLOSION_B_1:"./assets/img/Explosion1.png",EXPLOSION_B_2:"./assets/img/Explosion2.png",EXPLOSION_B_3:"./assets/img/Explosion3.png",EXPLOSION_END:"./assets/img/ExplosionEnd.png",HP_FULL:"./assets/img/HealthOrbFull.png",HP_EMPTY:"./assets/img/HealthOrbEmpty.png",get:function(t){}}},{}],29:[function(t,e,i){"use strict";var a=t("./Assets.js"),o=function(t){this.queue=new createjs.LoadQueue(!1),a.get=this.queue.getResult.bind(this.queue),t&&this.queue.on("complete",t);var e=[];for(var i in a){var o={id:i,src:a[i]};e.push(o)}this.queue.loadManifest(e)};e.exports=o},{"./Assets.js":28}],30:[function(t,e,i){"use strict";var a=t("./Assets.js"),o=t("./Preloader.js");e.exports={Assets:a,Preloader:o}},{"./Assets.js":28,"./Preloader.js":29}]},{},[7])(7)});
